/**
 * jQuery EasyDataTable Plugin
 * 
 * Version 2.4.0
 * 
 * http://easyproject.cn
 * https://github.com/ushelp/EasyDataTable
 * 
 * Copyright 2014 Ray [ inthinkcolor@gmail.com ]
 * 
 * Dependencies: jQuery
 * 
 */
!function(window){var cacheData={},cacheDataRow={},cacheThLength={},cachePageTheme={},cacheLanguage={},cacheOrderArrow={},cacheInitLoading={},cacheStartFun={},cacheEndFun={},cacheUserPage={},cacheInit={},cacheDefaultRow={},cacheInitStaticData={},cacheStaticData={},cacheStaticTable={},cacheLoadDefault={},cacheSizeArray={},order_default="&uarr;&darr;",order_up="&uarr;",order_down="&darr;",orderCache={},rowEvents={},rowEventsDT={},innerLoad=function(tableid,easydataParams,jsonData,staticFlag){var dataForm,pagenoEle,rowperpageEle,defRow,initPage,usetheme,dataRow,table_loading_attr,data,valueObject,j,i,rowPerPage,pageNo,s,e,pageData,nowDataTable=$("[id='"+tableid+"']");if(0!=nowDataTable.length){if(easydataParams=void 0==easydataParams?{}:easydataParams,dataForm=$("form").has(nowDataTable),pagenoEle=dataForm.find("[name='pageNo']"),rowperpageEle=dataForm.find("[name='rowPerPage']"),Validate.integer.test(pagenoEle.val())||pagenoEle.val(1),Validate.integer.test(rowperpageEle.val())||rowperpageEle.val(this.default_row),cacheInit[tableid]?dataForm.find(".panelBar [id='datatable_pagenum']").html(pageNumSpan(tableid,pagenoEle.val(),cacheData[tableid]["totalCount"])):(cacheInit[tableid]=!1,easydataParams.start&&(cacheStartFun[tableid]=easydataParams.start),easydataParams.end&&(cacheEndFun[tableid]=easydataParams.end),defRow=DataTable.default_row,Validate.integer.test(easydataParams.row)?defRow=easydataParams.row:(defRow=dataForm.find(".panelBar").attr("row"),Validate.integer.test(defRow)||(defRow=DataTable.default_row)),cacheDefaultRow[tableid]=defRow+"",initPage="<div id='datatable_initPageData' style='display:none'><input type='hidden' name='pageNo' value='1'/><input type='hidden' name='rowPerPage' value='"+defRow+"' />"+"</div>",dataForm.append(initPage)),cacheStartFun[tableid])try{cacheStartFun[tableid](nowDataTable[0],!cacheInit[tableid])}catch(e){}if(void 0!=easydataParams.pagetheme&&(cachePageTheme[tableid]=easydataParams.pagetheme),cachePageTheme[tableid]||(usetheme=dataForm.find(".panelBar").attr("pagetheme"),cachePageTheme[tableid]=usetheme?usetheme:DataTable.FULL_PAGE,cacheInit[tableid]||(cacheUserPage[tableid]=dataForm.find(".panelBar").html(),cacheUserPage[tableid]&&(cacheUserPage[tableid]=cacheUserPage[tableid].replace(/\n/g,"").replace(/\r/g,"").replace("}%","}%\r\n")),dataForm.find(".panelBar").html(""))),cacheDataRow[tableid]||(dataRow=("<tr>"+nowDataTable.find(" tr:eq(1)").html()+"</tr>").replace(/\n/g,"").replace(/\r/g,"").replace("}%","}%\r\n"),cacheDataRow[tableid]=dataRow,nowDataTable.find(" tr:eq(1)").find("td").css("border","0"),nowDataTable.find(" tr:eq(1)").css("border","0")),void 0==cacheLoadDefault[tableid]&&(table_loading_attr=nowDataTable.attr("loading"),cacheLoadDefault[tableid]=table_loading_attr?table_loading_attr:DataTable.loading_show,void 0!=easydataParams.loading&&(cacheLoadDefault[tableid]=easydataParams.loading+"")),postParam=dataForm.serialize(),loadShow(tableid,nowDataTable),easydataParams.language&&(cacheLanguage[tableid]=easydataParams.language),void 0==cacheLanguage[tableid]&&(cacheLanguage[tableid]=DataTable.default_lang),staticFlag){if(data=jsonData,valueObject=nowDataTable.attr("value"))if($.isArray(data[valueObject].data))data.totalCount=data[valueObject].data.length,data[valueObject].totalCount=data[valueObject].data.length;else{j=0;for(i in data[valueObject].data)j++;data.totalCount=j,data[valueObject].totalCount=j}else if($.isArray(data.data))data.totalCount=data.data.length;else{j=0;for(i in data.data)j++;data.totalCount=j}if(rowPerPage=data.totalCount,valueObject?jsonData.rowPerPage?(dataForm.find("[name='rowPerPage']").val(jsonData.rowPerPage),rowPerPage=jsonData.rowPerPage):jsonData[valueObject].rowPerPage&&(dataForm.find("[name='rowPerPage']").val(jsonData[valueObject].rowPerPage),rowPerPage=jsonData[valueObject].rowPerPage):jsonData.rowPerPage?(dataForm.find("[name='rowPerPage']").val(jsonData.rowPerPage),rowPerPage=jsonData.rowPerPage):Validate.integer.test(dataForm.find(".panelBar").attr("row"))&&(rowPerPage=dataForm.find(".panelBar").attr("row")),easydataParams.row&&(rowPerPage=easydataParams.row),pageNo=data.pageNo,valueObject?(pageNo||(pageNo=data[valueObject].pageNo),pageNo||(pageNo=1)):pageNo||(pageNo=1),s=(pageNo-1)*rowPerPage,e=parseInt(s)+parseInt(rowPerPage),valueObject){pageData={},$.isArray(data[valueObject].data)&&(pageData=[]),j=0;for(i in data[valueObject].data)j>=s&&e>j&&(pageData[i]=data[valueObject].data[i]),j++;data.pageNo=pageNo,data.rowPerPage=rowPerPage,data[valueObject].pageNo=pageNo,data[valueObject].rowPerPage=rowPerPage,data[valueObject].data=pageData}else{pageData={},$.isArray(data.data)&&(pageData=[]),j=0;for(i in data.data)j>=s&&e>j&&(pageData[i]=data.data[i]),j++;data.pageNo=pageNo,data.rowPerPage=rowPerPage,data.data=pageData}if(cacheDefaultRow[tableid]=rowPerPage+"",cacheData[tableid]=data,dataShow(tableid,nowDataTable,dataForm,data),cacheEndFun[tableid])try{cacheEndFun[tableid](nowDataTable[0],!cacheInit[tableid])}catch(e){}cacheInit[tableid]||(cacheInit[tableid]=!0,$("#datatable_initPageData").remove())}else $.post(dataForm.attr("action"),postParam,function(data){if("string"==typeof data&&(data=eval("("+data+")")),cacheData[tableid]=data,dataShow(tableid,nowDataTable,dataForm,data),cacheEndFun[tableid])try{cacheEndFun[tableid](nowDataTable[0],!cacheInit[tableid])}catch(e){}cacheInit[tableid]||(cacheInit[tableid]=!0,$("#datatable_initPageData").remove())})}},staticPagination=function(a){var b,c,d;DataTable.resetOrder(a),b=clone(cacheStaticTable[a]),c=$("[id='"+a+"']"),0!=c.length&&(d=$("form").has("[id='"+a+"']"),b.pageNo=d.find("[name='pageNo']").val(),b.rowPerPage=d.find("[name='rowPerPage']").val(),innerLoad(a,{},b,!0))},entityMap={unescape:{"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'"}},entityRegexes={unescape:new RegExp("("+["&amp;","&lt;","&gt;","&quot;","&#x27;"].join("|")+")","g")},unescape=function(a){return null==a?"":(""+a).replace(entityRegexes["unescape"],function(a){return entityMap["unescape"][a]})},formatContent=function(content,jsondata){var reg,regExp,arrExp;return content=unescape(content),reg=/\{([^}]+)\}/g,regExp=/\%\{(.*)\}\%/g,arrExp=/\[([0-9]+)\]/g,content=content.replace(regExp,function(m,i){with(jsondata)try{var res=eval($.trim(i).replace(arrExp,function(a,b){return jsondata[b]}));return void 0==res?"":res}catch(e){return m}}),content=content.replace(reg,function(m,i,i2){with(jsondata)try{var res;return-1!=(i+"").indexOf(".")&&(res=jsondata[i]),res?res:/\[([0-9]+)\]/.test(i)?jsondata[i.substring(1,i.length-1)]:null==eval($.trim(i))?"":eval($.trim(i))}catch(e){return""}})},clone=function(a){var b,c;if(null==a||void 0==a)return a;b=a.constructor===Array?[]:{};for(c in a)b[c]="object"==typeof a[c]?clone(a[c]):a[c];return b},staticMatch=function(a,b,c){this.name=a,this.value=b,this.match=c},regFilter=function(a){return a.replace(/\\/g,"\\\\").replace(/\+|\.|\*|\?|\^|\$|\[|\]|\(|\)|\{|\}|\/|\|/g,"\\$&")},sqlFilter=function(a){return a.replace(/\\/g,"\\\\").replace(/\+|\.|\*|\?|\^|\$|\(|\)|\{|\}|\/|\|/g,"\\$&").replace(/_/g,".").replace(/%/g,".*")},matchReg=function(a,b,c){var d="^",e="$";return"extra"==a||"extra_i"==a?b=regFilter(b):"sql"==a||"sql_i"==a?b=sqlFilter(b):"like"==a||"like_i"==a?(b=regFilter(b),d="",e=""):(d="",e=""),new RegExp(d+b+e,c)},filterStaticData=function(a,b,c,d){var h,i,j,k,l,m,n,e=DataTable.default_matchMode.toLowerCase(),f=-1!=e.indexOf("_i")?"i":"",g={};$.each(b,function(a,b){/\[([0-9]+)\]/.test(a)&&(a=a.substring(1,a.length-1)),""!=$.trim(b)&&(g[a]=new staticMatch(a,matchReg(e,b,f),e))}),d.find(":input[mode]").each(function(a,b){var c,d,e;b=$.trim($(this).val()),""!=b&&(c=$(this).attr("name"),d=$(this).attr("mode").toLowerCase(),/\[([0-9]+)\]/.test(c)&&(c=c.substring(1,c.length-1)),"extra"!=d&&"extra_i"!=d&&"sql"!=d&&"sql_i"!=d&&"like"!=d&&"like_i"!=d&&"reg"!=d&&"reg_i"!=d&&(d=DataTable.default_matchMode.toLowerCase()),e=-1!=d.indexOf("_i")?"i":"",g[c]=new staticMatch(c,matchReg(d,b,e),d))}),h=$.isArray(a),i={},h&&(i=[]),j=!0;for(k in g)""!=g[k]&&(j=!1);if(j)return a;if(l=0,c)for(m in a){n=!1;for(k in g)try{if(""!=g[k]&&a[m][k]&&g[k].value.test(a[m][k])){n=!0;break}}catch(o){}n&&(h?(i[l]=a[m],l++):i[m]=a[m])}else for(m in a){n=!0;for(k in g)try{if(!a[m][k]){n=!1;break}if(!g[k].value.test(a[m][k])){n=!1;break}}catch(o){n=!1;break}n&&(h?(i[l]=a[m],l++):i[m]=a[m])}return i},getPostParam=function(a){var d,b={},c="#maxPage#rowPerPage#datatableIndex#datatableCount#pageNo#totalCount#order#sort#".toLowerCase();for(d in a)-1==c.indexOf("#"+a[d].name.toLowerCase()+"#")&&(b[a[d].name]=a[d].value.replace(/(^\s+)|(\s+$)/g,""));return b},loadShow=function(a,b){if(cacheLoadDefault[a]){var c=cacheLoadDefault[a].toLowerCase();"default"==c?(void 0==cacheInitLoading[a]&&(b.find(" tr:gt(0)").remove(),cacheInitLoading[a]="loaded"),b.find(" tr:gt(0)").find("*").on("click",function(){return!1}),b.find(" tr:gt(0)").find("*").css("color","gray")):"none"==c?(void 0==cacheInitLoading[a]&&(b.find(" tr:gt(0)").remove(),cacheInitLoading[a]="loaded"),b.find("tr:gt(0)").hide()):"hide"==c?(void 0==cacheInitLoading[a]&&(b.find(" tr:gt(0)").remove(),cacheInitLoading[a]="loaded"),b.find("tr:gt(0)").css("visibility","hidden")):"show"==c?(b.find(" tr:gt(0)").remove(),$("[id='"+a+"_loading_div']").hide(),b.after("<div id='"+a+"_loading_div' class='DataTable_Loading'>"+DataTable.loading_msg+"</div>")):(b.find(" tr:gt(0)").remove(),$("[id='"+a+"_loading_div']").hide(),b.after("<div id='"+a+"_loading_div' class='DataTable_Loading'>"+cacheLoadDefault[a]+"</div>"))}},initDataAndContent=function(a,b,c,d,e,f,g){var m,n,o,h="",i=0,j=b.attr("value"),k="",l="";if(j){k=d[j].order,l=d[j].sort,k||(k=d.order),l||(l=d.sort),k||(k=""),l||(l=""),cacheData[a].pageNo=parseInt(d[j].pageNo),cacheData[a].rowPerPage=parseInt(d[j].rowPerPage),cacheData[a].totalCount=parseInt(d[j].totalCount),cacheData[a].order=k,cacheData[a].sort=l,cacheData[a].maxPage=Math.floor((cacheData[a].totalCount-1)/cacheData[a].rowPerPage+1),m=d[j].data,e&&(m=filterStaticData(d[j].data,e,f,c)),cacheStaticData[a]=clone(m);for(n in m){m[n].datatableCount=parseInt(i)+1,m[n].datatableIndex=parseInt(i);for(o in d)o!=j&&(m[n][o]=d[o]);m[n].pageNo=parseInt(d[j].pageNo),m[n].rowPerPage=parseInt(d[j].rowPerPage),m[n].totalCount=parseInt(d[j].totalCount),m[n].maxPage=Math.floor((parseInt(m[n].totalCount)-1)/parseInt(m[n].rowPerPage)+1),m[n].key=n,m[n].order=k,m[n].sort=l,g||(h+=formatContent(cacheDataRow[a],m[n])),i++}}else{k=d.order,l=d.sort,k||(k=""),l||(l=""),cacheData[a].maxPage=Math.floor((parseInt(d.totalCount)-1)/parseInt(d.rowPerPage)+1),m=d.data,e&&(m=filterStaticData(d.data,e,f,c)),cacheStaticData[a]=clone(m);for(n in m){for(o in d)"data"!=o&&(m[n][o]=d[o]);m[n].datatableCount=parseInt(i)+1,m[n].datatableIndex=parseInt(i),m[n].key=n,m[n].maxPage=Math.floor((parseInt(m[n].totalCount)-1)/parseInt(m[n].rowPerPage)+1),m[n].order=k,m[n].sort=l,g||(h+=formatContent(cacheDataRow[a],m[n])),i++}}return c.find(" .pages .totalCount").html(i),{content:h,dataTableOrder:k,dataTableSort:l}},dataShow=function(a,b,c,d,e,f,g){var i,h=initDataAndContent(a,b,c,d,e,f,g);e||(pageTheme(a,cachePageTheme[a]),c.find(" .pages .totalCount").html(d["totalCount"]),c.find(" .mycombox").val(d["rowPerPage"]),c.find(" [name='pageNo']").val(d["pageNo"]),c.find(" .pages .maxPage").html(Math.floor((parseInt(d["totalCount"])-1)/parseInt(d["rowPerPage"])+1)),c.find("[name='rowPerPage']").off("change"),c.find("[name='rowPerPage']").on("change",function(){var d=$(this).val(),e=c.find("[name='pageNo']"),f=Math.floor((cacheData[a]["totalCount"]-1)/d+1);e.val()>f&&e.val(f),cacheStaticTable[a]?staticPagination(a):DataTable.load(a)}),pageCheck(a)),i='<tr name="sort_order_hidden" style="display:none"><td colspan=\''+$("[id='"+a+"'] tr:eq(0)").find("th").length+"'><input type='hidden' name='order' value='"+h.dataTableOrder+"'/>"+"<input type='hidden' name='sort' value='"+h.dataTableSort+"'/></td></tr>",h.content+=i,b.find(" tr:gt(0)").remove(),$("[id='"+a+"_loading_div']").remove(),b.append(h.content),addRowEvent(b)},dataObject=function(a,b){this.k=a,this.v=b},dataSort=function(a,b,c){var e,f,g,h,d=!0;$.isArray(a)||(d=!1),e=new Array;for(f in a)e.push(new dataObject(f,a[f]));if(/\[([0-9]+)\]/.test(b)&&(b=b.substring(1,b.length-1)),e.sort(function(a,d){return"key"==b.toLowerCase()?a.k==d.k?0:"asc"==c.toLowerCase()?a.k>d.k?1:-1:d.k>a.k?1:-1:a.v[b]==d.v[b]?0:"asc"==c.toLowerCase()?a.v[b]>d.v[b]?1:-1:d.v[b]>a.v[b]?1:-1}),g=[],d)for(h=0,f=0;f<e.length;f++)g[h]=e[f].v,h++;else for(f=0;f<e.length;f++)g[e[f].k]=e[f].v;return g},Validate={integer:/^[1-9][0-9]*$/},firstDisable=function(a,b,c){if(!b){var d=$("form").has("[id='"+a+"']");b=d.find("[name='first']"),c=d.find("[name='prev']")}b.off("click"),c.off("click"),b.removeClass("pageGoHover"),c.removeClass("pageGoHover"),b.addClass("firstlastgo"),c.addClass("firstlastgo"),b.unbind("mouseenter").unbind("mouseleave"),c.unbind("mouseenter").unbind("mouseleave")},firstEnable=function(a,b,c){if(!b){var d=$("form").has("[id='"+a+"']");b=d.find("[name='first']"),c=d.find("[name='prev']")}b.off("click"),c.off("click"),b.on("click",function(){DataTable.first(a)}),c.on("click",function(){DataTable.prev(a)}),b.unbind("mouseenter").unbind("mouseleave"),c.unbind("mouseenter").unbind("mouseleave"),b.removeClass("firstlastgo"),c.removeClass("firstlastgo")},lastDisable=function(a,b,c){if(!b){var d=$("form").has("[id='"+a+"']");b=d.find("[name='last']"),c=d.find("[name='next']")}b.off("click"),c.off("click"),b.removeClass("pageGoHover"),c.removeClass("pageGoHover"),b.addClass("firstlastgo"),c.addClass("firstlastgo"),b.unbind("mouseenter").unbind("mouseleave"),c.unbind("mouseenter").unbind("mouseleave")},lastEnable=function(a,b,c){if(!b){var d=$("form").has("[id='"+a+"']");b=d.find("[name='last']"),c=d.find("[name='next']")}c.off("click"),b.off("click"),c.on("click",function(){DataTable.next(a)}),b.on("click",function(){DataTable.last(a)}),c.unbind("mouseenter").unbind("mouseleave"),b.unbind("mouseenter").unbind("mouseleave"),c.removeClass("firstlastgo"),b.removeClass("firstlastgo")},pageCheck=function(a){var b=$("form").has("[id='"+a+"']"),c=cacheData[a]["maxPage"],d=parseInt(cacheData[a]["pageNo"]),e=b.find("[name='first']"),f=b.find("[name='prev']"),g=b.find("[name='next']"),h=b.find("[name='last']"),i=b.find("[name='pagegoto']"),j=b.find("[name='numgoto']");firstEnable(a,e,f),lastEnable(a,h,g),i.off("click"),j.off("click"),i.on("click",function(){DataTable.gopage(a)}),j.on("click",function(b){DataTable.numgoto(a,b)}),g.removeClass("firstlastgo"),h.removeClass("firstlastgo"),loadInit(),1>=d&&firstDisable(a,e,f),d>=c&&lastDisable(a,h,g)},pageMsgCkeck=function(a){cacheLanguage[a].first||(cacheLanguage[a].first=DataTable.default_lang.first),cacheLanguage[a].previous||(cacheLanguage[a].previous=DataTable.default_lang.previous),cacheLanguage[a].next||(cacheLanguage[a].next=DataTable.default_lang.next),cacheLanguage[a].last||(cacheLanguage[a].last=DataTable.default_lang.last),cacheLanguage[a].totalPage||(cacheLanguage[a].totalPage=DataTable.default_lang.totalPage),cacheLanguage[a].rowPerPage||(cacheLanguage[a].rowPerPage=DataTable.default_lang.rowPerPage),cacheLanguage[a].totalCount||(cacheLanguage[a].totalCount=DataTable.default_lang.totalCount)},pageNumSpan=function(a,b,c){var d,e,f,g,h;for(b=parseInt(b),d=Math.floor((parseInt(c)-1)/parseInt(cacheData[a]["rowPerPage"])+1),e=b-3,f=b+3,1>e&&(e=1,f=e+6,f>d&&(f=d)),f>d&&(f=d,e=f-6,1>e&&(e=1)),g="",h=e;f>=h;h++)g+=h==b?'<span class="pagego nowpagenum" name="numgoto"  value="numgoto_'+h+'">'+h+"</span>":'<span class="pagego" name="numgoto" value="numgoto_'+h+'">'+h+"</span>";return g},pageTheme=function(a,b){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,c=$("form").has("[id='"+a+"']"),d="";b&&"no"==b.toLowerCase()?d=cacheUserPage[a]:(e=c.find(".panelBar").length,0!=e&&(f=cacheSizeArray[a],f||(g=c.find(".panelBar").attr("size"),f=[cacheData[a].rowPerPage],g&&(f=g.split(",")),cacheDefaultRow[a]&&(h="#"+f.join("#")+"#",-1!=h.indexOf("#"+cacheDefaultRow[a]+"#")?cacheDefaultRow[a]=null:f.push(cacheDefaultRow[a])),f.sort(function(a,b){return parseInt(a)-parseInt(b)}),cacheSizeArray[a]=f),pageMsgCkeck(a),i=cacheLanguage[a].rowPerPage.indexOf("{0}"),j=cacheLanguage[a].rowPerPage.substring(0,i),k=cacheLanguage[a].rowPerPage.substring(i+3),l='<div class="pages"><span>'+j+"</span>"+'<select class="mycombox" name="rowPerPage" >',$.each(f,function(a,b){l+='<option value="'+b+'" >'+b+"</option>"}),l+="</select><span>"+k+"，",m=cacheLanguage[a].totalPage.indexOf("{0}"),n=cacheLanguage[a].totalPage.substring(0,m),o=cacheLanguage[a].totalPage.substring(m+3),p=cacheLanguage[a].totalCount.indexOf("{0}"),q=cacheLanguage[a].totalCount.substring(0,p),r=cacheLanguage[a].totalCount.substring(p+3),l+=q+'<label class="totalCount"></label>'+r+"</span></div>",s='<div class="pages " style="float: right;text-align: right;">',t='<span class="totalPage">'+n+'<label class="maxPage"></label>'+o+"</span>",u='<span class="pagego" name="first">'+cacheLanguage[a].first+"</span>"+'<span class="pagego" name="prev">'+cacheLanguage[a].previous+"</span>",v="<span id='datatable_pagenum'>"+pageNumSpan(a,cacheData[a]["pageNo"],cacheData[a]["totalCount"])+"</span>",w='<span class="pagego" name="next">'+cacheLanguage[a].next+"</span>"+'<span class="pagego" name="last">'+cacheLanguage[a].last+"</span>",x='<span class="pagego"><input type="text" class="gototxt" name="pageNo"  /></span>',x+='<span class="pagegoto" name="pagegoto">&gt;&gt;</span>',y="</div>",d=b&&"FULL"!=b.toUpperCase()?"SIMPLE"==b.toUpperCase()?l+s+t+u+w+x+y:l+s+t+u+v+w+x+y:l+s+t+u+v+w+x+y)),c.find(".panelBar").html(formatContent(d,cacheData[a])),c.find(".panelBar .customPaging").show()},loadInit=function(){$(".pagego").hover(function(){$(this).addClass("pageGoHover")},function(){$(this).removeClass("pageGoHover")})},doStaticSearch=function(a,b,c,d){var e,f,g,i,j,k;if(DataTable.resetOrder(a),e=$("[id='"+a+"']"),0!=e.length){if(f=$("form").has("[id='"+a+"']"),g=f.find("[name='pageNo']"),g.val(1),cacheStartFun[a])try{cacheStartFun[a](e[0],!cacheInit[a])}catch(h){}if(loadShow(a,e),postParam=f.serializeArray(),i=getPostParam(postParam),d?(initDataAndContent(a,e,f,c,i,b,d),j=e.attr("value"),k=cacheStaticTable[a],j?k[j].data=cacheStaticData[a]:k.data=cacheStaticData[a],cacheStaticTable[a]=clone(k),f=$("form").has("[id='"+a+"']"),k.pageNo=f.find("[name='pageNo']").val(),k.rowPerPage=f.find("[name='rowPerPage']").val(),innerLoad(a,{},k,!0)):dataShow(a,e,f,c,i,b,d),cacheEndFun[a])try{cacheEndFun[a](e[0],!cacheInit[a])}catch(h){}}},pageRangeChk=function(a){var b=$("form").has("[id='"+a+"']"),c=b.find("[name='pageNo']"),d=b.find("[name='rowPerPage']").val(),e=Math.floor((cacheData[a]["totalCount"]-1)/d+1);c.val()>e&&c.val(e)},fldeChk=function(a,b){firstEnable(a),lastEnable(a),1>=b&&(firstDisable(a),cacheData[a]["maxPage"]>1&&lastEnable(a)),b>=cacheData[a]["maxPage"]&&(lastDisable(a),cacheData[a]["maxPage"]>1&&firstEnable(a))},dtSort=function(){$("table:has([sort]),table:has([staticSort])").each(function(){var a=$(this),b=a.attr("id");a.find("[sort],[staticSort]").each(function(){var f,g,h,a=$(this),c=order_default,d=order_up,e=order_down;orderCache&&$.each(orderCache,function(a){var h=","+a.toLowerCase()+",";return tableidTmp=","+b.toLowerCase()+",",-1!=h.indexOf(tableidTmp)&&(f=!0),f?(orderCache[a].order_default?c=orderCache[a].order_default:"",orderCache[a].order_up?d=orderCache[a].order_up:"",orderCache[a].order_down?e=orderCache[a].order_down:"",void 0):void 0}),g=a.find("span.sortArrow").length>0?a.html().replace(a.find("span.sortArrow").html(),c):a.html()+"<span class='sortArrow' name='orderspan'>"+c+"</span>",a.html(g),a.css("cursor","pointer"),a.off("click"),h=$("form").has("[id='"+b+"']"),a.on("click",function(){var i,g=a.attr("sort")||a.attr("staticSort");h.find("input[name='sort']").length>0&&(h.find("input[name='sort']").val(g),h.find("input[name='order']").val("asc"==h.find("input[name='order']").val().toLowerCase()?"desc":"asc"),i=$(this).find("[name='orderspan']"),cacheOrderArrow[b]&&cacheOrderArrow[b].html(c),"asc"==h.find("input[name='order']").val()?i.html(d):"desc"==h.find("input[name='order']").val()?i.html(e):i.html(c),cacheOrderArrow[b]=i,a.attr("sort")?DataTable.load(b):DataTable.staticDataSort(b,g,h.find("input[name='order']").val()))})}),a.find("[sort],[staticSort]").hover(function(){var a=$(this).find("[name='orderspan']");a.removeClass("sortArrow"),a.removeClass("sortArrowDown"),a.addClass("sortArrowHover")},function(){var a=$(this).find("[name='orderspan']");a.removeClass("sortArrowHover"),a.addClass("sortArrow")}),a.find("[sort],[staticSort]").on("mousedown",function(){var a=$(this).find("[name='orderspan']");a.removeClass("sortArrowHover"),a.addClass("sortArrowDown")}),a.find("[sort],[staticSort]").on("mouseup",function(){var a=$(this).find("[name='orderspan']");a.removeClass("sortArrowDown"),a.addClass("sortArrowHover")})})},addRowEvent=function(a){var b,c;a.find(" tr:even").addClass("evenColor"),a.find(" tr").hover(function(){$(this).addClass("trHover")},function(){$(this).removeClass("trHover")}),a.find(" tr").on("click",function(){$(this).hasClass("trClick")?($(this).removeClass("trClick"),b=null):(b&&b.removeClass("trClick"),$(this).addClass("trClick"),b=$(this))}),c=a.attr("id"),rowEventsDT[c]?$.each(rowEventsDT[c],function(b,c){a.find(" tr").on(b,c)}):rowEvents&&$.each(rowEvents,function(b,c){a.find(" tr").on(b,c)})},DataTable={default_row:5,default_matchMode:"like_i",loading_show:"default",loading_msg:"Data is loading ......",default_lang:{first:"first",previous:"previous",next:"next",last:"last",totalCount:"total {0} rows",totalPage:"total {0} pages",rowPerPage:"page for {0} rows"},staticLoad:function(tableid,jsonData,easydataParams){"string"==typeof jsonData&&(jsonData=eval("("+jsonData+")")),cacheStaticTable[tableid]=clone(jsonData),cacheInitStaticData[tableid]=clone(jsonData),innerLoad(tableid,easydataParams,clone(jsonData),!0)},fileLoad:function(a,b,c){$.post(b,function(b){cacheStaticTable[a]=clone(b),cacheInitStaticData[a]=clone(b),innerLoad(a,c,clone(b),!0)})},load:function(a,b){innerLoad(a,b)},resetOrder:function(a){var b=$("form").has("[id='"+a+"']");b.find("[name='order']").val(""),b.find("[name='sort']").val(""),cacheOrderArrow[a]&&cacheOrderArrow[a].html("&uarr;&darr;")},reload:function(a){DataTable.resetOrder(a),cacheStaticTable[a]?staticPagination(a):DataTable.load(a)},out:function(a){return a},staticDataSort:function(a,b,c){var e,f,g,h,i,j,k,l,m,d=$("[id='"+a+"']");if(0!=d.length){if(e=$("form").has("[id='"+a+"']"),f="",g=0,h=d.attr("value"),i=cacheData[a],h){j=dataSort(cacheStaticData[a],b,c);for(k in j){j[k].datatableCount=parseInt(g)+1,j[k].datatableIndex=parseInt(g);for(l in i)l!=h&&(j[k][l]=i[l]);j[k].pageNo=parseInt(i[h].pageNo),j[k].rowPerPage=parseInt(i[h].rowPerPage),j[k].totalCount=parseInt(i[h].totalCount),j[k].maxPage=Math.floor((parseInt(j[k].totalCount)-1)/parseInt(j[k].rowPerPage)+1),j[k].key=k,j[k].order=c,j[k].sort=b,f+=formatContent(cacheDataRow[a],j[k]),g++}e.find(" .pages .totalCount").html(g)}else{j=dataSort(cacheStaticData[a],b,c);for(k in j){for(l in i)"data"!=l&&(j[k][l]=i[l]);j[k].datatableCount=parseInt(g)+1,j[k].datatableIndex=parseInt(g),j[k].key=k,j[k].maxPage=Math.floor((parseInt(j[k].totalCount)-1)/parseInt(j[k].rowPerPage)+1),j[k].order=c,j[k].sort=b,f+=formatContent(cacheDataRow[a],j[k]),g++}e.find(" .pages .totalCount").html(g)}m='<tr name="sort_order_hidden" style="display:none"><td colspan=\''+$("[id='"+a+"'] tr:eq(0)").find("th").length+"'><input type='hidden' name='order' value='"+c+"'/>"+"<input type='hidden' name='sort' value='"+b+"'/></td></tr>",f+=m,d.find(" tr:gt(0)").remove(),$("[id='"+a+"_loading_div']").remove(),d.append(f),addRowEvent(d)}},staticSearchAll:function(a,b){doStaticSearch(a,b,cacheInitStaticData[a],!0)},staticSearch:function(a,b){doStaticSearch(a,b,cacheData[a])},first:function(a){var b=$("form").has("[id='"+a+"']"),c=b.find("[name='pageNo']");c.val(1),fldeChk(a,1),cacheStaticTable[a]?staticPagination(a):this.load(a)},prev:function(a){var b=$("form").has("[id='"+a+"']"),c=b.find("[name='pageNo']");c.val(parseInt(cacheData[a]["pageNo"])-1),fldeChk(a,c.val()),cacheStaticTable[a]?staticPagination(a):this.load(a)},next:function(a){var b=$("form").has("[id='"+a+"']"),c=b.find("[name='pageNo']");c.val(parseInt(cacheData[a]["pageNo"])+1),fldeChk(a,c.val()),cacheStaticTable[a]?staticPagination(a):this.load(a)},last:function(a){var b=$("form").has("[id='"+a+"']"),c=b.find("[name='pageNo']");c.val(cacheData[a]["maxPage"]),fldeChk(a,cacheData[a]["maxPage"]),cacheStaticTable[a]?staticPagination(a):this.load(a)},gopage:function(a){var b,c;pageRangeChk(a),b=$("form").has("[id='"+a+"']"),c=b.find("[name='pageNo']"),cacheData[a]["pageNo"]!=c.val()&&Validate.integer.test(c.val())&&(fldeChk(a,c.val()),cacheStaticTable[a]?staticPagination(a):this.load(a))},numgoto:function(a,b){var c=$("form").has("[id='"+a+"']"),d=c.find("[name='pageNo']");d.val($(b.target).text()),fldeChk(a,d.val()),cacheStaticTable[a]?staticPagination(a):this.load(a)},go:function(a,b,c){var e,f,g,d=$("form").has("[id='"+a+"']");d&&Validate.integer.test(b)&&(b=parseInt(b),0>=b&&(b=1),c&&Validate.integer.test(c)||(c=cacheData[a]["rowPerPage"]),e=Math.floor((cacheData[a]["totalCount"]-1)/c+1),b>e&&(b=e),f=d.find("[name='pageNo']"),f.val()?f.val(b):d.append('<input type="hidden" value="'+b+'" name="pageNo"/>'),g=d.find("[name='rowPerPage']"),g.val()?g.val(c):d.append('<input type="hidden" value="'+c+'" name="rowPerPage"/>'),d.find("[name='rowPerPage']").val(c),cacheData[a]["pageNo"]!=b&&(cacheStaticTable[a]?staticPagination(a):this.load(a)))},checkAll:function(a,b){var c=a.checked;c?$(a.form).find("[name='"+b+"']").each(function(){this.checked=!0}):$(a.form).find("[name='"+b+"']").each(function(){this.checked=!1})},setOrder:function(a,b){b?(orderCache[b]={},orderCache[b].order_default=a.order_default,orderCache[b].order_up=a.order_up,orderCache[b].order_down=a.order_down):(order_default=a.order_default,order_up=a.order_up,order_down=a.order_down),dtSort()},setRowEvent:function(a,b){b?rowEventsDT[b]=a:rowEvents=a,$(".datatable").each(function(){addRowEvent($(this))})},init:function(){function a(a,b){var c=$(a.form).find("table[id]").attr("id");a=$(a),a.off("click"),a.on("click",function(){c&&(b.all?b.or?DataTable.staticSearchAll(c,!0):DataTable.staticSearchAll(c):b.or?DataTable.staticSearch(c,!0):DataTable.staticSearch(c))})}$(".pagego").hover(function(){$(this).addClass("pageGoHover")},function(){$(this).removeClass("pageGoHover")}),$(".datatable").find("tr:eq(1)").css("visibility","hidden"),$(".easydatatable").each(function(){var a=$(this).attr("id");cacheInit[a]||a&&DataTable.load(a)}),$("[check]").on("click",function(){DataTable.checkAll(this,$(this).attr("check"))}),$(".data_search").each(function(){var a=$(this.form).find("table[id]").attr("id"),b=$(this);b.off("click"),b.on("click",function(){a&&DataTable.load(a)})}),$(".data_static_search").each(function(){a(this,{})}),$(".data_static_search_or").each(function(){a(this,{or:!0})}),$(".data_static_searchAll").each(function(){a(this,{all:!0})}),$(".data_static_searchAll_or").each(function(){a(this,{or:!0,all:!0})}),dtSort()}};window.DataTable=DataTable}(window);